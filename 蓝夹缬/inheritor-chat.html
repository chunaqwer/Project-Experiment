<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>非遗传承人对话 - 文化创新知识服务系统</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .inheritors-container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }

        .inheritors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .inheritor-card {
            text-align: center;
            cursor: pointer;
            padding: 20px;
            border-radius: 10px;
            background: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .inheritor-card:hover {
            transform: translateY(-5px);
        }

        .inheritor-card.active {
            border: 2px solid #1a237e;
        }

        .inheritor-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: 0 auto 15px;
            overflow: hidden;
        }

        .inheritor-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .inheritor-name {
            font-size: 1.2em;
            color: #333;
            margin-bottom: 5px;
        }

        .inheritor-specialty {
            color: #666;
            font-size: 0.9em;
        }

        .chat-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .chat-header {
            background: #1a237e;
            color: white;
            padding: 20px;
            display: flex;
            align-items: center;
        }

        .chat-header img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
        }

        .chat-messages {
            height: 400px;
            overflow-y: auto;
            padding: 20px;
        }

        .message {
            display: flex;
            margin-bottom: 20px;
        }

        .message.inheritor {
            flex-direction: row;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin: 0 10px;
        }

        .message-content {
            max-width: 70%;
            padding: 15px;
            border-radius: 20px;
        }

        .inheritor .message-content {
            background: #f5f5f5;
            border-bottom-left-radius: 5px;
        }

        .user .message-content {
            background: #1a237e;
            color: white;
            border-bottom-right-radius: 5px;
        }

        .chat-input {
            display: flex;
            padding: 20px;
            background: #f9f9f9;
            border-top: 1px solid #eee;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 20px;
            border: 1px solid #ddd;
            border-radius: 25px;
            margin-right: 10px;
            font-size: 16px;
        }

        .chat-input button {
            padding: 12px 25px;
            background: #1a237e;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .chat-input button:hover {
            background: #283593;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <h1>文化创新知识服务系统</h1>
        </div>
        <nav>
            <ul class="nav-menu">
                <li><a href="index.html">首页</a></li>
                <li class="dropdown">
                    <a href="#">知识服务系统</a>
                    <div class="dropdown-content">
                        <a href="art.html">艺术构成库</a>
                        <a href="craft.html">工艺构成库</a>
                        <a href="commercial.html">商业构成库</a>
                        <a href="gene.html">基因图谱</a>
                    </div>
                </li>
                <li class="dropdown">
                    <a href="#">创新设计系统</a>
                    <div class="dropdown-content">
                        <a href="inheritor.html">非遗传承人</a>
                        <a href="designer.html">设计师</a>
                    </div>
                </li>
                <li><a href="search.html"><i class="fas fa-search"></i> 知识检索</a></li>
                <li class="dropdown">
                    <a href="#"><i class="fas fa-user"></i> 用户</a>
                    <div class="dropdown-content">
                        <a href="login.html">登录</a>
                        <a href="register.html">注册</a>
                    </div>
                </li>
            </ul>
        </nav>
    </header>

    <div class="inheritors-container">
        <div class="inheritors-grid">
            <div class="inheritor-card" data-specialty="传统工艺">
                <div class="inheritor-avatar">
                    <img src="images/chat1.png" alt="王师傅">
                </div>
                <h3 class="inheritor-name">王河生</h3>
                <p class="inheritor-specialty">传统工艺专家</p>
            </div>
            <div class="inheritor-card" data-specialty="图案设计">
                <div class="inheritor-avatar">
                    <img src="images/chat1.png" alt="李师傅">
                </div>
                <h3 class="inheritor-name">李明德</h3>
                <p class="inheritor-specialty">图案设计大师</p>
            </div>
            <div class="inheritor-card" data-specialty="染色技艺">
                <div class="inheritor-avatar">
                    <img src="images/chat1.png" alt="张师傅">
                </div>
                <h3 class="inheritor-name">张艺文</h3>
                <p class="inheritor-specialty">染色技艺专家</p>
            </div>
            <div class="inheritor-card" data-specialty="创新应用">
                <div class="inheritor-avatar">
                    <img src="images/chat1.png" alt="陈师傅">
                </div>
                <h3 class="inheritor-name">陈巧玲</h3>
                <p class="inheritor-specialty">创新应用专家</p>
            </div>
        </div>

        <div class="chat-container">
            <div class="chat-header">
                <div>
                    <h3 id="current-inheritor-name">王河生</h3>
                    <p id="current-inheritor-specialty">传统工艺专家</p>
                </div>
            </div>

            <div class="chat-messages" id="chat-messages">
                <!-- 消息内容会通过JavaScript动态添加 -->
            </div>

            <div class="chat-input">
                <input type="text" placeholder="请输入您的问题..." id="message-input">
                <button id="send-button">发送</button>
            </div>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const inheritorCards = document.querySelectorAll('.inheritor-card');
                const currentInheritorAvatar = document.getElementById('current-inheritor-avatar');
                const currentInheritorName = document.getElementById('current-inheritor-name');
                const currentInheritorSpecialty = document.getElementById('current-inheritor-specialty');
                const chatMessages = document.getElementById('chat-messages');
                const messageInput = document.getElementById('message-input');
                const sendButton = document.getElementById('send-button');

                // 预设的回答
                const inheritorResponses = {
                    "王河生": {
                        default: "作为一名传统工艺专家，我很乐意为您解答关于蓝夹缬传统制作工艺的问题。",
                        keywords: {
                            "工艺": "蓝夹缬的传统工艺主要包括雕版、浸染等步骤，每个环节都需要严格把控...",
                            "技术": "传统的蓝夹缬制作技术需要多年的积累和实践，关键在于...",
                            "流程": "完整的蓝夹缬制作流程包括选材、雕版、配色、夹印、染色等多个步骤..."
                        }
                    },
                    "李明德": {
                        default: "很高兴能和您交流蓝夹缬的图案设计，这是一门需要深厚文化底蕴的艺术。",
                        keywords: {
                            "图案": "蓝夹缬的传统图案包含了丰富的文化内涵，每个纹样都有其独特的寓意...",
                            "设计": "在设计蓝夹缬图案时，需要考虑构图、寓意、技术可行性多个方面...",
                            "纹样": "传统纹样主要包括花鸟、人物、几何等类型，每种都有其特定的表现手法..."
                        }
                    },
                    "张艺文": {
                        default: "染色是蓝夹缬制作中最关键的环节之一，我很乐意分享这方面的经验。",
                        keywords: {
                            "染料": "传统蓝夹缬使用天然靛蓝染料，需要经过特殊的处理过程...",
                            "色彩": "蓝夹缬的色彩变化非常丰富，主要通过控制染料浓度和染色时间来实现...",
                            "染色": "染色过程需要特别注意温度、时间等因素的控制..."
                        }
                    },
                    "陈巧玲": {
                        default: "让我们一起探讨如何将传统蓝夹缬创新应用到现代生活中。",
                        keywords: {
                            "创新": "蓝夹缬的创新应用可以涉及服装、家居、艺术等多个领域...",
                            "应用": "现代蓝夹缬产品设计需要考虑市场需求和实用性...",
                            "产品": "我们开发了许多新型蓝夹缬产品，包括服饰、家居用品等..."
                        }
                    }
                };

                // 切换传承人
                inheritorCards.forEach(card => {
                    card.addEventListener('click', function() {
                        // 移除其他卡片的激活状态
                        inheritorCards.forEach(c => c.classList.remove('active'));
                        // 激活当前卡片
                        this.classList.add('active');

                        // 更新聊天界面的传承人信息
                        const name = this.querySelector('.inheritor-name').textContent;
                        const specialty = this.querySelector('.inheritor-specialty').textContent;

                        currentInheritorName.textContent = name;
                        currentInheritorSpecialty.textContent = specialty;

                        // 清空聊天记录
                        chatMessages.innerHTML = '';
                        // 添加欢迎消息
                        addMessage(inheritorResponses[name].default, 'inheritor');
                    });
                });

                // 发送消息
                function sendMessage() {
                    const message = messageInput.value.trim();
                    if (message === '') return;

                    // 添加用户消息
                    addMessage(message, 'user');
                    messageInput.value = '';

                    // 获取当前传承人
                    const currentInheritor = currentInheritorName.textContent;
                    const inheritorData = inheritorResponses[currentInheritor];

                    // 查找关键词匹配的回答
                    let response = inheritorData.default;
                    for (const keyword in inheritorData.keywords) {
                        if (message.includes(keyword)) {
                            response = inheritorData.keywords[keyword];
                            break;
                        }
                    }

                    // 延迟添加传承人回复
                    setTimeout(() => {
                        addMessage(response, 'inheritor');
                    }, 1000);
                }

                // 修改添加消息的函数
                function addMessage(text, sender) {
                    const messageDiv = document.createElement('div');
                    messageDiv.className = `message ${sender}`;

                    const content = document.createElement('div');
                    content.className = 'message-content';
                    content.textContent = text;

                    messageDiv.appendChild(content);
                    chatMessages.appendChild(messageDiv);

                    // 滚动到底部
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }

                // 绑定发送按钮事件
                sendButton.addEventListener('click', sendMessage);
                messageInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        sendMessage();
                    }
                });

                // 初始化第一个传承人为激活状态
                inheritorCards[0].click();
            });
        </script>
    </div>
</body>
</html>